webpackJsonp([7],{"7Otq":function(t,e,s){t.exports=s.p+"static/img/logo.2bdf780.png"},K31e:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("v2ns");var i=s("7QTg"),o=s("m/Y2"),a={name:"login",data:function(){return{isLogo:!0,swiperOption:{observer:!0,observerParents:!0,autoHeight:!0,scrollbarHide:!0,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0,bulletClass:"circle",bulletActiveClass:"circle-b"}},value:!0,ishand:!0}},methods:{logo:function(){this.isLogo=!1},gologin:function(){localStorage.setItem("old",1),this.$router.push({name:"main.recommend"})},wim:function(t){console.log(t),1===t&&this.$router.push({name:"main.recommend"})}},components:{swiper:i.swiper,swiperSlide:i.swiperSlide,hand:o.a},created:function(){},mounted:function(){var t=this;setTimeout(function(){t.logo(),"1"===localStorage.getItem("old")&&(localStorage.getItem("passwordxx")&&localStorage.getItem("chooseType")?t.ishand=!1:t.$router.push({name:"main.recommend"}))},1e3)}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isLogo?i("img",{staticClass:"logo",attrs:{src:s("7Otq")}}):t._e(),t._v(" "),t.ishand?i("swiper",{attrs:{options:t.swiperOption}},[i("swiper-slide",[i("img",{staticClass:"banner",attrs:{src:s("iXp0")}})]),t._v(" "),i("swiper-slide",[i("img",{staticClass:"banner",attrs:{src:s("LCzZ")}})]),t._v(" "),i("swiper-slide",[i("img",{staticClass:"banner",attrs:{src:s("L7hi")}}),t._v(" "),i("button",{on:{click:t.gologin}},[t._v("立即进入")])])],1):t._e(),t._v(" "),i("div",{staticClass:"swiper-pagination"}),t._v(" "),t.ishand?t._e():i("hand",{attrs:{value:t.value},on:{win:t.wim}})],1)},staticRenderFns:[]};var r=s("VU/8")(a,n,!1,function(t){s("PkrA")},"data-v-311220b0",null);e.default=r.exports},L7hi:function(t,e,s){t.exports=s.p+"static/img/login3.370e9bc.png"},LCzZ:function(t,e,s){t.exports=s.p+"static/img/login2.26df1d3.png"},PkrA:function(t,e){},iXp0:function(t,e,s){t.exports=s.p+"static/img/login1.e508366.png"},"m/Y2":function(t,e,s){"use strict";var i=s("mvHQ"),o=s.n(i),a=s("Kwsg"),n={props:{value:{type:Boolean,default:!1},draw:{type:Boolean,default:!1}},data:function(){var t=this;return{currentValue:!1,ctx:"",width:0,height:0,devicePixelRatio:0,chooseType:"",r:"",lastPoint:[],arr:[],restPoint:[],pswObj:{step:2},canvas:"",change:this.draw,botton:!1,number:5,pops:{doText:"确定",title:"清除缓存",isOn:!1,main:["切换账号将会注销已登录账号，是否继续？"],callback:function(){console.log("清除"),t.pops.isOn=!1,t.$http(t.path.out).then(function(t){console.log(t)}),localStorage.removeItem("passwordxx"),localStorage.removeItem("chooseType"),t.$router.push({name:"enter"})}},code:"",isCode:!1,message:"",isM:!1,isOne:!0}},watch:{value:{handler:function(t){this.currentValue=t},immediate:!0},currentValue:function(t){this.$emit(t?"on-show":"on-hide"),this.$emit("input",t)}},created:function(){void 0!==this.value&&(this.currentValue=this.value)},mounted:function(){this.setChooseType(3),console.log("2"===localStorage.getItem("hand")),"2"===localStorage.getItem("hand")&&(this.updatePassword(),localStorage.removeItem("hand"))},methods:{codeOn:function(){this.isCode=!0},codeIn:function(){this.isCode=!1},user:function(){this.pops.isOn=!0},codeEnter:function(){var t=this,e=localStorage.getItem("id"),s={password:this.code};this.isOne&&(this.isOne=!1,this.$http(this.path.myHand(e,s)).then(function(e){console.log(e),-1===e.data.code?(t.isM=!0,t.message=e.data.message,setTimeout(function(){t.isM=!1,t.isOne=!0},2500)):(t.message=e.data.message,t.isM=!0,t.isOne=!0,t.isCode=!1,t.updatePassword(),setTimeout(function(){t.isM=!1},1e3))}))},closePwd:function(){console.log("关闭界面"),this.currentValue=!1},H5lock:function(t){this.height=t.height,this.width=t.width,this.chooseType=Number(window.localStorage.getItem("chooseType"))||t.chooseType,this.devicePixelRatio=window.devicePixelRatio||1},drawCle:function(t,e){this.ctx.strokeStyle="#87888a",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.arc(t,e,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.stroke()},drawPoint:function(t){for(var e=0;e<this.lastPoint.length;e++)this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.arc(this.lastPoint[e].x,this.lastPoint[e].y,this.r/2.5,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},drawStatusPoint:function(t){for(var e=0;e<this.lastPoint.length;e++)this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.arc(this.lastPoint[e].x,this.lastPoint[e].y,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.stroke()},drawLine:function(t,e,s){this.ctx.beginPath(),this.ctx.strokeStyle=t,this.ctx.lineWidth=3,this.ctx.moveTo(this.lastPoint[0].x,this.lastPoint[0].y);for(var i=1;i<this.lastPoint.length;i++)this.ctx.lineTo(this.lastPoint[i].x,this.lastPoint[i].y);this.ctx.lineTo(e.x,e.y),this.ctx.stroke(),this.ctx.closePath()},createCircle:function(){var t=this.chooseType,e=0;this.r=this.ctx.canvas.width/(2+4*t),this.lastPoint=[],this.arr=[],this.restPoint=[];for(var s=this.r,i=0;i<t;i++)for(var o=0;o<t;o++){var a={x:4*o*s+3*s,y:4*i*s+3*s,index:++e};this.arr.push(a),this.restPoint.push(a)}this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(var n=0;n<this.arr.length;n++)this.drawCle(this.arr[n].x,this.arr[n].y)},getPosition:function(t){var e=t.currentTarget.getBoundingClientRect();return{x:(t.touches[0].clientX-e.left)*this.devicePixelRatio,y:(t.touches[0].clientY-e.top)*this.devicePixelRatio}},update:function(t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(var e=0;e<this.arr.length;e++)this.drawCle(this.arr[e].x,this.arr[e].y);this.drawPoint("#E8C763"),this.drawStatusPoint("#E8C763"),this.drawLine("#E8C763",t,this.lastPoint);for(var s=0;s<this.restPoint.length;s++)if(Math.abs(t.x-this.restPoint[s].x)<this.r&&Math.abs(t.y-this.restPoint[s].y)<this.r){this.drawPoint(this.restPoint[s].x,this.restPoint[s].y),this.lastPoint.push(this.restPoint[s]),this.restPoint.splice(s,1);break}},checkPass:function(t,e){for(var s="",i="",o=0;o<t.length;o++)s+=t[o].index+t[o].index;for(var a=0;a<e.length;a++)i+=e[a].index+e[a].index;return s===i},storePass:function(t){var e=this;if(1===this.pswObj.step)this.checkPass(this.pswObj.fpassword,t)?(this.pswObj.step=2,this.pswObj.spassword=t,this.botton=!1,this.drawStatusPoint("#2CFF26"),this.drawPoint("#2CFF26"),this.$refs.gestureTitle.innerHTML="密码保存成功",window.localStorage.setItem("passwordxx",o()(this.pswObj.spassword)),window.localStorage.setItem("chooseType",this.chooseType),setTimeout(function(){e.$router.back(-1)},2e3)):(this.$refs.gestureTitle.innerHTML="两次不一致，重新输入",this.drawStatusPoint("red"),this.drawPoint("red"),delete this.pswObj.step);else if(2===this.pswObj.step)if(this.checkPass(this.pswObj.spassword,t)){var s=this.$refs.gestureTitle;this.drawStatusPoint("#2CFF26"),this.drawPoint("#2CFF26"),this.drawLine("#2CFF26",this.lastPoint[this.lastPoint.length-1],this.lastPoint),this.change?this.updatePassword():(s.style.color="#2CFF26",s.innerHTML="解锁成功",this.$emit("win",1))}else if(t.length<4){this.drawStatusPoint("red"),this.drawPoint("red"),this.drawLine("red",this.lastPoint[this.lastPoint.length-1],this.lastPoint);var i=this.$refs.gestureTitle;i.style.color="red",i.innerHTML="请连接4个点"}else{this.drawStatusPoint("red"),this.drawPoint("red"),this.drawLine("red",this.lastPoint[this.lastPoint.length-1],this.lastPoint);var a=this.$refs.gestureTitle;a.style.color="red",0===this.number?(a.innerHTML="密码错误请重新登录",this.$http(this.path.out).then(function(t){e.$router.push({name:"enter"}),localStorage.setItem("hand",1)})):(a.innerHTML="密码错误，您还可以输入"+this.number+"次",this.number=this.number-1)}else this.pswObj.step=1,this.pswObj.fpassword=t,this.$refs.gestureTitle.innerHTML="再次输入",this.change&&(this.botton=!0)},makeState:function(){if(2===this.pswObj.step){var t=this.$refs.gestureTitle;t.style.color="#87888a",this.change?t.innerHTML="请绘制原始密码":t.innerHTML="请解锁"}else this.pswObj.step},setChooseType:function(t){this.chooseType=t,this.init()},updatePassword:function(){this.botton=!1,window.localStorage.removeItem("passwordxx"),window.localStorage.removeItem("chooseType"),this.pswObj={},this.$refs.gestureTitle.innerHTML="绘制解锁图案",this.reset()},initDom:function(){this.chooseType=Number(window.localStorage.getItem("chooseType"))||3,this.devicePixelRatio=window.devicePixelRatio||1;var t=this.$refs.canvas,e=this.width||320,s=this.height||320;t.style.width=e+"px",t.style.height=s+"px",t.height=s*this.devicePixelRatio,t.width=e*this.devicePixelRatio},init:function(){this.initDom(),this.pswObj=window.localStorage.getItem("passwordxx")?{step:2,spassword:JSON.parse(window.localStorage.getItem("passwordxx"))}:{},this.lastPoint=[],this.makeState(),this.touchFlag=!1,this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.createCircle(),this.bindEvent()},reset:function(){this.makeState(),this.createCircle()},bindEvent:function(){var t=this;this.canvas=this.$refs.canvas,this.canvas.addEventListener("touchstart",function(e){e.preventDefault();for(var s=t.getPosition(e),i=0;i<t.arr.length;i++)if(Math.abs(s.x-t.arr[i].x)<t.r&&Math.abs(s.y-t.arr[i].y)<t.r){t.touchFlag=!0,t.drawPoint(t.arr[i].x,t.arr[i].y),t.lastPoint.push(t.arr[i]),t.restPoint.splice(i,1);break}},!1),this.canvas.addEventListener("touchmove",function(e){t.touchFlag&&t.update(t.getPosition(e))},!1),this.canvas.addEventListener("touchend",function(e){t.touchFlag&&(t.touchFlag=!1,t.storePass(t.lastPoint),setTimeout(function(){t.reset()},1e3))},!1)}},components:{pop:a.a}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.currentValue,expression:"currentValue"}],staticClass:"masks"},[i("div",{staticClass:"gesturePwd"},[i("div",{staticStyle:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}},[i("h4",{ref:"gestureTitle",staticClass:"gestureTitle"},[t._v("请绘制您的图形密码")]),t._v(" "),i("a",{staticClass:"forget",on:{click:t.codeOn}},[t._v("忘记手势密码")]),t._v(" "),i("a",{staticClass:"left",on:{click:t.user}},[t._v("切换账号")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:t.botton,expression:"botton"}],on:{click:function(e){t.updatePassword()}}},[t._v("重绘")]),t._v(" "),i("canvas",{ref:"canvas",staticStyle:{"background-color":"#fff",display:"inline-block","margin-top":"76px",width:"320px",height:"320px"}})])]),t._v(" "),i("pop",{attrs:{pop:t.pops}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isCode,expression:"isCode"}],staticClass:"wanji"},[i("div",[i("p",[t._v("请输入密码")]),t._v(" "),i("div",{staticClass:"code"},[i("img",{attrs:{src:s("5EE2")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text",placeholder:"输入登录密码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"button"},[i("p",{on:{click:t.codeIn}},[t._v("取消")]),t._v(" "),i("p",{on:{click:t.codeEnter}},[t._v("登录")])])])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.isM,expression:"isM"}],staticClass:"message"},[t._v(t._s(t.message))])])],1)},staticRenderFns:[]};var h=s("VU/8")(n,r,!1,function(t){s("zxrn")},"data-v-1ae75862",null);e.a=h.exports},zxrn:function(t,e){}});